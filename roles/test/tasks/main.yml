---
# tasks file for test
- name: Generate a Self Signed OpenSSL certificate
  openssl_certificate:
    path: '/etc/kubernetes/pki/apiserver-etcd-client.crt'
    csr_path: '/etc/kubernetes/pki/apiserver-etcd-client.csr'
    provider: selfsigned
  register: result

- name: result
  debug:
    msg: "{{ result }}"

# - name: Create a Service object from an inline definition
#   k8s:
#     state: present
#     force: yes
#     kubeconfig: /etc/kubernetes/admin.kubeconfig
#     definition:
#       apiVersion: v1
#       kind: Service
#       metadata:
#         name: web
#         namespace: testing
#         labels:
#           app: galaxy
#           service: web
#       spec:
#         selector:
#           app: galaxy
#           service: web
#         ports:
#         - protocol: TCP
#           targetPort: 8000
#           name: port-8000-tcp
#           port: 8000